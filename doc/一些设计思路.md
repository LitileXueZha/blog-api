# 点击量统计

更细的可以划分到 PV、UV 等值，这里只简单的统计点击量。首先要明确统计的几个点：

1. 用户不同 +1
2. 日期不同 +1

还有面临的几个问题：

**刷新页面时，统计 +1 怎么办？**

在客户端生成一个 sessionId，以此来判断是同一用户，当天通过此 sessionId 发送的请求。

# 等一下，还是先直接统计次数好了！

建议另起一个表 `stats` 来统计，而不是在原有基础上增加字段

sql +1 语句：

```sql
UPDATE a
   SET num=num+1
 WHERE id=12
```

# 全文检索

最简单的 `like '%text%'` 无索引的功能，查询效率较慢。

[官方文档](https://dev.mysql.com/doc/refman/8.0/en/fulltext-search.html)提供了 `FULLTEXT` 索引，用来检索多个 column，但只支持字符串类型。也有内置的分词器 `ngram` 可支持中文。

参考：[MySQL 全文检索方案 - FULLTEXT 索引](https://www.sunzhongwei.com/mysql-full-text-retrieval-scheme-fulltext-indexing)
